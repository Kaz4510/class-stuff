 //bus reservation
#include<conio.h>
#include<stdio.h>
#include<string.h>
#include<stdlib>
using namespace std;
static int p=0;
class a
{
 char bus[5], driver[10], arrival[5], depart[5], from[10], to[10], seat[8][4][10];
 public:
  void install()`;
  void allotment();
  void empty();
  void show();
  void avail();
  void position(int i);
}
bus[10];
void vline(char ch)
{
for(int i=80;i>0;i--)
cout<<ch;
}
void a::install()
{
cout<<"enter bus no: ";
cin>>bus[p].busn;
cout<<"\nEnter driver's name: ";
cin>>bus[p].driver;
cout<<"\nArrival time: ";
cin>>bus[p].arrival;
cout<<"\n Departure: "
cin>>bus[p].depart;
cout<<"\nFrom: ";
cin>>bus[n].from;
cout<<"\nTo: ";
cin>>bus[p].to;
bus[p].empty;
p++;
}
voida::allotment()
{
  int seat;
  char number[5];
  top:
  cout<<"bus no: ";
  cin>>number;
  int n;
  for(n=0;n<=p;n++)
  {
   if(strcmp(bus[n]-busn,number)==0)
   break;
  }
  while(n<=p)
  {
  cout<<"\nSelect Number: ";
  cin>>seat;
  if(seat>32)
  {
  cout<<"\nThere are only 32 seats available in this bus.";
  }
  else
  {
  if(strcmp(bus[n]-seat[seat/4][seat%4)-1},"Empty")==0)
  {
  cout<<"Enter passenger's name";
  cin>>bus[n].seat[seat/4][(seat%4)-1];
  break;
  }
  else
  {
  cout<<"the seat no. is already reserved\n";
  }
  }
  if(n>p)
  {
  cout<<"Enter correct bus no.\n";
  goto top;
  }
  }
  void a::empty()
  {
  for(int i=0;i<0;i++)
  {
  for(j=0;j<4;j++)
  {
  stcpy(bus[p].seat[i][j],"empty");
 }
 }
 }
 void a::show()
 {
 int n;
 char number[5];
 cout<<"Enter bus no: ";
 cin>>number;
 for(n=0;n<=p;n++)
 {
 if(strcmp(bus[n].busn,number)==0)
 break;
 }
 while(n<=p)
 {
 vline('*')'
 cout<<"Bus no: \t"<<bus[n].busn<<"\nDriver: \t"<<bus[n].driver<<"\t\Arrival time: \t"
 <<bus[n].arrival<<"\tDeparture time:"<<bus[n].depart<<"\nFrom: \t\t"<<bus[n].from
 <<"\tTo: "<<bus[n].to<<endl;
 vline('*');
 bus[0].position(n);
 int a=1;
 for(int i=0;i<8;i++)
 {
 a++;
 if(strcmp(bus[n],seat[i][j],"Empty")!=0)
 cout<<"\nThe seat no "<<(a-1)<<"is reserved "<<bus[n].seat[i][j]<<".";
 }
 }
 break;
 }
 if(n>=p)
 cout<<"enter correct bus no: ";
 }
 void a::position(int l)
 {
 int s=0,p=0;
 for(int i=0;i<8;i++){
 cout<<"\n";
 for(int j=0;j<4;j++){
 s++;
 if(strcmp(bus[1].seat[i][j],"Empty")==0)
 {
 cout.width(5);
 cout.fill(' ');
 cout<<s<<".";
 cout.width(10);
 cout.fill(' ');
 cout<<bus[1].seat[i][j];
 p++;
 }
 else
 {
 cout.width(5);
 cout.fill(' ');
 cout<<s<<".";
 cout.width(10);
 cout.fill(' ');
 cout<<bus[1].seat[i][j];
 }
 }
 }
 cout<<"\n\nThere are "<<p<<" seats empty in bus no. "<<bus[l].busn;
 }
 void a::avail(){
 for(int n=0;n<=p;n++)
 {
  vline('*')'
 cout<<"Bus no: \t"<<bus[n].busn<<"\nDriver: \t"<<bus[n].driver<<"\t\Arrival time: \t"
 <<bus[n].arrival<<"\tDeparture time:"<<bus[n].depart<<"\nFrom: \t\t"<<bus[n].from
 <<"\tTo: "<<bus[n].to<<endl;
 vline('*');
 vline('_');
 }
 }
 int main()
 {
 system("cls");
 int w;
 while(i)
 {
 cout<<"\n\n\n\n\n";
 cout<<"\t\t\t1.Install\n\t\t\t"
 <<"2.Reservation\n\t\t\t"
 <<"3.Show\n\t\t\t"
 <<"4.Buses Available. \n\t\t\t"
 <<"5.Exit";
 cout<<"\n\t\t\tEnter your choice: ";
 cin>>w;
 switch(w)
 {case 1: bus[p].install();
 break;
 case 2: bus[p].allotment() ;
 break;
 case 3: bus[p].show();
 break;
 case 4: bus[p].avail();
 break;
 case 5: exit(0);
 }
 }
 return 0;
 }
 
